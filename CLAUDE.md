# Meeting AI é¡¹ç›® - Claude Code æŒ‡å—

## ğŸ“Œ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: ä¼šè®®çºªè¦ AI (meeting-ai)

**ä¸€å¥è¯æè¿°**: å®Œå…¨ç¦»çº¿è¿è¡Œçš„æœ¬åœ° AI è½¯ä»¶ï¼Œè‡ªåŠ¨å°†éŸ³é¢‘è½¬æ¢ä¸ºå¸¦è¯´è¯äººæ ‡è¯†çš„ä¼šè®®çºªè¦

**æœ€ç»ˆç›®æ ‡**: æ‰“åŒ…æˆæ¡Œé¢è½¯ä»¶ï¼ˆè®¡åˆ’ç”¨ Tauriï¼Œç›®å‰å…ˆç”¨ Flet åš MVPï¼‰

**ç”¨é€”**: ä¸ªäººé¡¹ç›®ï¼Œç”¨äºç®€å†å±•ç¤º

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

1. **è¯´è¯äººåˆ†ç¦»** - è¯†åˆ«éŸ³é¢‘ä¸­ä¸åŒçš„è¯´è¯äººï¼ˆSPEAKER_00, SPEAKER_01...ï¼‰
2. **è¯­éŸ³è½¬æ–‡å­—** - å°†éŸ³é¢‘è½¬å†™ä¸ºæ–‡æœ¬
3. **æ™ºèƒ½å‘½å** - æ ¹æ®å¯¹è¯å†…å®¹è¯†åˆ«è¯´è¯äººçš„åå­—/èº«ä»½ï¼ˆå¦‚"å¼ æ•™æˆ"ã€"å°æŸ”"ï¼‰
4. **æ€§åˆ«æ£€æµ‹** - æ ¹æ®å£°éŸ³ç‰¹å¾åˆ¤æ–­æ€§åˆ«
5. **é”™åˆ«å­—æ ¡æ­£** - ä¿®å¤ Whisper è½¬å†™çš„å¸¸è§é”™è¯¯
6. **ä¼šè®®æ€»ç»“** - è‡ªåŠ¨ç”Ÿæˆä¼šè®®æ‘˜è¦
7. **éŸ³é¢‘å¢å¼º** - é™å™ªã€å»æ··å“ï¼ˆå¯é€‰ï¼‰

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

| æ¨¡å— | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| è¯´è¯äººåˆ†ç¦» | pyannote-audio 3.1 | éœ€è¦ HuggingFace Token |
| è¯­éŸ³è½¬å†™ | faster-whisper | åŸºäº CTranslate2ï¼Œæ¯” OpenAI Whisper å¿« |
| æ™ºèƒ½å‘½å | llama-cpp-python + Qwen2.5-7B | GGUF æ ¼å¼ï¼Œæœ¬åœ°è¿è¡Œ |
| æ€§åˆ«æ£€æµ‹ | librosa åŸºé¢‘åˆ†æ | ç”·æ€§ < 165Hz < å¥³æ€§ |
| éŸ³é¢‘å¤„ç† | ffmpeg + librosa | æ ¼å¼è½¬æ¢ã€ç‰¹å¾æå– |
| éŸ³é¢‘å¢å¼º | noisereduce | å¯é€‰ä¾èµ– |
| CLI | typer + rich | ç¾è§‚çš„å‘½ä»¤è¡Œç•Œé¢ |
| GUI | Flet 0.80+ (MVP) â†’ Tauri (æœ€ç»ˆ) | å·²å®Œæˆé€‚é…ï¼ŒUI å®æ—¶æ›´æ–°æ­£å¸¸ |
| é…ç½® | pydantic-settings | æ”¯æŒ .env æ–‡ä»¶ |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
meeting-ai/
â”œâ”€â”€ src/meeting_ai/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli.py              # å‘½ä»¤è¡Œå…¥å£ (typer)
â”‚   â”œâ”€â”€ gui.py              # Flet GUI (å·²å®Œæˆ)
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç† (pydantic-settings)
â”‚   â”œâ”€â”€ models.py           # æ•°æ®æ¨¡å‹ (Segment, SpeakerInfo, etc.)
â”‚   â”œâ”€â”€ logger.py           # æ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py     # æœåŠ¡å·¥å‚å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ diarization.py  # è¯´è¯äººåˆ†ç¦» (pyannote)
â”‚   â”‚   â”œâ”€â”€ asr.py          # è¯­éŸ³è½¬å†™ (faster-whisper)
â”‚   â”‚   â”œâ”€â”€ alignment.py    # è¯´è¯äºº-æ–‡æœ¬å¯¹é½
â”‚   â”‚   â”œâ”€â”€ gender.py       # æ€§åˆ«æ£€æµ‹ (åŸºé¢‘åˆ†æ)
â”‚   â”‚   â”œâ”€â”€ naming.py       # â­ æ™ºèƒ½å‘½å (æ ¸å¿ƒï¼Œæœ€å¤æ‚)
â”‚   â”‚   â”œâ”€â”€ correction.py   # é”™åˆ«å­—æ ¡æ­£ (LLM)
â”‚   â”‚   â””â”€â”€ summary.py      # ä¼šè®®æ€»ç»“ (LLM)
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ audio.py        # éŸ³é¢‘æ ¼å¼è½¬æ¢ (ffmpeg)
â”‚       â””â”€â”€ enhance.py      # éŸ³é¢‘å¢å¼º (noisereduce)
â”œâ”€â”€ models/                  # æœ¬åœ°æ¨¡å‹å­˜æ”¾ç›®å½•
â”‚   â”œâ”€â”€ pyannote/           # è¯´è¯äººåˆ†ç¦»æ¨¡å‹
â”‚   â”œâ”€â”€ whisper/            # Whisper æ¨¡å‹ (è‡ªåŠ¨ä¸‹è½½)
â”‚   â””â”€â”€ llm/                # LLM æ¨¡å‹ (æ‰‹åŠ¨ä¸‹è½½)
â”‚       â””â”€â”€ qwen2.5-7b-instruct-q4_k_m.gguf
â”œâ”€â”€ outputs/                 # å¤„ç†ç»“æœè¾“å‡ºç›®å½•
â”œâ”€â”€ tests/
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ download_models.py  # æ¨¡å‹ä¸‹è½½è„šæœ¬
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®
â””â”€â”€ .env.example            # é…ç½®ç¤ºä¾‹
```

---

## ğŸ”„ æ•°æ®å¤„ç†æµç¨‹

```
åŸå§‹éŸ³é¢‘ (mp3/wav/m4a)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. éŸ³é¢‘è½¬æ¢ (utils/audio.py)        â”‚
â”‚    â†’ 16kHz, å•å£°é“, WAV æ ¼å¼        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ (å¯é€‰)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. éŸ³é¢‘å¢å¼º (utils/enhance.py)      â”‚
â”‚    â†’ é™å™ª, å½’ä¸€åŒ–                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è¯´è¯äººåˆ†ç¦» (services/diarization.py)
â”‚    â†’ segments: [{start, end, speaker}, ...]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¯­éŸ³è½¬å†™ (services/asr.py)       â”‚
â”‚    â†’ segments: [{start, end, text}, ...]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. æ—¶é—´å¯¹é½ (services/alignment.py) â”‚
â”‚    â†’ åˆå¹¶è¯´è¯äººå’Œæ–‡æœ¬ä¿¡æ¯           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ (å¯é€‰)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. é”™åˆ«å­—æ ¡æ­£ (services/correction.py)
â”‚    â†’ LLM ä¿®å¤å¸¸è§è½¬å†™é”™è¯¯           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. æ€§åˆ«æ£€æµ‹ (services/gender.py)    â”‚
â”‚    â†’ åŸºé¢‘åˆ†æåˆ¤æ–­æ€§åˆ«               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. æ™ºèƒ½å‘½å (services/naming.py)    â”‚
â”‚    â†’ SPEAKER_00 â†’ "å¼ æ•™æˆ"          â”‚
â”‚    â†’ SPEAKER_01 â†’ "å°æŸ”"            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ (å¯é€‰)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. ä¼šè®®æ€»ç»“ (services/summary.py)   â”‚
â”‚    â†’ ç”Ÿæˆ Markdown æ ¼å¼æ€»ç»“         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
è¾“å‡º: result.json, result.txt, summary.md
```

---

## â­ æ™ºèƒ½å‘½åæ ¸å¿ƒé€»è¾‘ (naming.py)

è¿™æ˜¯é¡¹ç›®æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œç»è¿‡å¤šæ¬¡è¿­ä»£ä¿®å¤ã€‚

### å‘½åä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰

1. **æ­£åˆ™æå–çš„çœŸå®åå­—** - ä»å¯¹è¯ä¸­ç›´æ¥æå–ï¼ˆå¦‚"å°æŸ”ï¼Œæˆ‘æƒ³é—®ä½ "â†’"å°æŸ”"ï¼‰
2. **LLM è¯†åˆ«çš„çœŸå®åå­—** - LLM è¿”å› kind="name" ä¸”åœ¨å¯¹è¯ä¸­å‡ºç°
3. **ä¸»æŒäººåˆ¤æ–­** - é—®å¥æ¯”ä¾‹ â‰¥ 30% çš„è¯´è¯äºº
4. **LLM æ¨æ–­çš„è§’è‰²** - LLM è¿”å› kind="role"ï¼ˆå¦‚"ç»„é•¿"ã€"æ±‡æŠ¥äºº"ï¼‰
5. **æ€§åˆ«å…œåº•** - "ç”·æ€§01"ã€"å¥³æ€§01"ã€"è¯´è¯äºº01"

### æ­£åˆ™æå–æ¨¡å¼

```python
# è‡ªæˆ‘ä»‹ç»
"æˆ‘æ˜¯å¼ æ˜" â†’ "å¼ æ˜"
"æˆ‘å«æå››" â†’ "æå››"

# ç§°å‘¼ä»–äººï¼ˆå¸¦åç¼€ï¼‰
"å¼ æ•™æˆ" â†’ "å¼ æ•™æˆ"
"è¯·ç‹ä¸»ä»»" â†’ "ç‹ä¸»ä»»"

# ç›´æ¥ç§°å‘¼ï¼ˆå…³é”®ï¼ï¼‰
"å°æŸ”ï¼Œæˆ‘æƒ³é—®ä½ " â†’ "å°æŸ”"
"å°æ˜ä½ å¥½" â†’ "å°æ˜"
"é˜¿å¼ºï¼Œè¿‡æ¥" â†’ "é˜¿å¼º"
"è€ç‹ï¼Œä½ æ¥" â†’ "è€ç‹"
```

### å·²ä¿®å¤çš„é—®é¢˜

1. **LLM ç¼–é€ åå­—** - ä¹‹å‰ LLM ä¼šç¼–é€ "å°æ˜"ã€"å°å"ç­‰å¸¸è§åå­—
   - ä¿®å¤ï¼šåå­—å¿…é¡»åœ¨å¯¹è¯åŸæ–‡ä¸­å‡ºç°æ‰æ¥å—

2. **"å°ç¨‹åº"è¢«å½“æˆäººå** - æ­£åˆ™æå–å¤ªå®½æ³›
   - ä¿®å¤ï¼šæ·»åŠ  NOT_NAMES é»‘åå• + LLM äºŒæ¬¡éªŒè¯

3. **æ­£åˆ™æå–ä¸åˆ°"å°æŸ”"** - ä¹‹å‰åªèƒ½è¯†åˆ«å¸¦åç¼€çš„ï¼ˆå¦‚"å¼ æ•™æˆ"ï¼‰
   - ä¿®å¤ï¼šæ·»åŠ  DIRECT_ADDRESS_PATTERNS ç›´æ¥ç§°å‘¼æ¨¡å¼

4. **è§’è‰²åå…¨æ˜¯"å˜‰å®¾"** - LLM è¿”å›çš„è§’è‰²ä¸å¤Ÿå…·ä½“
   - ä¿®å¤ï¼šä¼˜åŒ– Promptï¼Œè¦æ±‚æ¨æ–­å…·ä½“è§’è‰² + è‡ªåŠ¨ç¼–å·

### å…³é”®å‡½æ•°

- `extract_names_from_text(text)` - æ­£åˆ™æå–å€™é€‰åå­—
- `is_name_in_text(name, text)` - éªŒè¯åå­—åœ¨å¯¹è¯ä¸­å‡ºç°
- `_validate_names_with_llm(names, context)` - LLM éªŒè¯æ˜¯å¦æ˜¯äººå
- `_llm_name_speakers(segments, speakers)` - LLM æ¨æ–­åå­—/è§’è‰²
- `name_speakers(segments, gender_map)` - ä¸»å…¥å£å‡½æ•°

---

## ğŸ”§ é…ç½®è¯´æ˜

### .env æ–‡ä»¶å…³é”®é…ç½®

```bash
# LLM é…ç½®ï¼ˆé‡è¦ï¼ï¼‰
MEETING_AI_LLM__ENABLED=true
MEETING_AI_LLM__MODEL_PATH=models/llm/qwen2.5-7b-instruct-q4_k_m.gguf
MEETING_AI_LLM__N_CTX=6144          # ä¸Šä¸‹æ–‡é•¿åº¦
MEETING_AI_LLM__CONFIDENCE_THRESHOLD=0.75  # å‘½åç½®ä¿¡åº¦é˜ˆå€¼

# è¯´è¯äººåˆ†ç¦»
MEETING_AI_DIAR__MODEL_DIR=models/pyannote/speaker-diarization-3.1
MEETING_AI_DIAR__EMBEDDING_THRESHOLD=0.75

# ASR
MEETING_AI_ASR__MODEL_NAME=medium   # tiny/base/small/medium/large-v3
MEETING_AI_ASR__DEVICE=auto         # cpu/cuda/auto
MEETING_AI_ASR__COMPUTE_TYPE=int8   # int8/float16/float32

# HuggingFace Tokenï¼ˆpyannote éœ€è¦ï¼‰
HF_TOKEN=your_token_here
```

### æ¨¡å‹ä¸‹è½½

```bash
# 1. pyannote æ¨¡å‹ï¼ˆéœ€è¦å…ˆåœ¨ HuggingFace åŒæ„åè®®ï¼‰
# https://huggingface.co/pyannote/speaker-diarization-3.1
huggingface-cli download pyannote/speaker-diarization-3.1 \
    --local-dir ./models/pyannote/speaker-diarization-3.1 \
    --token $HF_TOKEN

# 2. Whisper æ¨¡å‹ï¼ˆè‡ªåŠ¨ä¸‹è½½ï¼Œæ— éœ€æ‰‹åŠ¨ï¼‰

# 3. LLM æ¨¡å‹ï¼ˆæ‰‹åŠ¨ä¸‹è½½ GGUFï¼‰
# æ¨è: Qwen2.5-7B-Instruct-GGUF (Q4_K_M é‡åŒ–)
# ä¸‹è½½åœ°å€: https://huggingface.co/Qwen/Qwen2.5-7B-Instruct-GGUF
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### CLI å‘½ä»¤

```bash
# å®‰è£…
pip install -e ".[dev,gui,enhance]"

# å®Œæ•´å¤„ç†
meeting-ai process audio.mp3

# å¸¦é€‰é¡¹
meeting-ai process audio.mp3 --no-summary --enhance

# ä»…è¯´è¯äººåˆ†ç¦»
meeting-ai diarize audio.mp3

# ä»…è½¬å†™
meeting-ai transcribe audio.mp3

# æŸ¥çœ‹å¸®åŠ©
meeting-ai --help
```

### GUI è¿è¡Œ

```bash
# å®‰è£… flet (éœ€è¦ 0.80+)
pip install "flet>=0.80"

# è¿è¡Œï¼ˆå¼€å‘æ¨¡å¼ï¼Œæ”¯æŒçƒ­é‡è½½ï¼‰
flet run src/meeting_ai/gui.py

# æˆ–ç›´æ¥è¿è¡Œ
python src/meeting_ai/gui.py

# å½“å‰ç‰ˆæœ¬
pip show flet | grep Version  # 0.80.5
```

---

## ğŸ“Š å¼€å‘é˜¶æ®µ

| é˜¶æ®µ | åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| 0 | é¡¹ç›®éª¨æ¶ | âœ… å®Œæˆ | CLI, config, models |
| 1 | è¯´è¯äººåˆ†ç¦» | âœ… å®Œæˆ | pyannote-audio |
| 2 | è¯­éŸ³è½¬å†™ + å¯¹é½ | âœ… å®Œæˆ | faster-whisper |
| 3 | æ™ºèƒ½å‘½å + æ€§åˆ«æ£€æµ‹ | âœ… å®Œæˆ | LLM + åŸºé¢‘åˆ†æ |
| 4 | ä¼šè®®æ€»ç»“ + éŸ³é¢‘å¢å¼º | âœ… å®Œæˆ | LLM + noisereduce |
| 5 | æ¡Œé¢ GUI | âœ… å®Œæˆ | Flet 0.80+ é€‚é…å®Œæˆ |
| 6 | å®æ—¶æµå¼å½•éŸ³ | ğŸ“… å¾…åš | sounddevice + webrtcvad |
| 7 | Tauri æ‰“åŒ… | ğŸ“… å¾…åš | Rust + å‰ç«¯ |

---

## ğŸ› å½“å‰é—®é¢˜ä¸å·²ä¿®å¤

### âœ… å·²ä¿®å¤ï¼šFlet 0.80+ API é€‚é…

Flet 0.80+ (1.0 Beta) æœ‰å¤§é‡ API å˜åŒ–ï¼Œå·²å®Œæˆé€‚é…ï¼š

| æ—§ API | æ–° API | è¯´æ˜ |
|--------|--------|------|
| `ft.app(target=main)` | `ft.run(main)` | å…¥å£å‡½æ•° |
| `ElevatedButton` | `Button` | æŒ‰é’®æ§ä»¶ |
| `FilePicker(on_result=...)` | `await file_picker.pick_files_async()` | å¼‚æ­¥æ–‡ä»¶é€‰æ‹© |
| `Dropdown(on_change=...)` | `Dropdown(on_select=...)` | ä¸‹æ‹‰é€‰æ‹©äº‹ä»¶ |
| `ft.border.all()` | `ft.Border.all()` | è¾¹æ¡† |
| `ft.padding.symmetric()` | `ft.Padding.symmetric()` | å†…è¾¹è· |

**æ³¨æ„**: `RadioGroup` ä»ä½¿ç”¨ `on_change`

### âœ… å·²ä¿®å¤ï¼šUI å®æ—¶æ›´æ–°é—®é¢˜

Flet 0.80+ é‡‡ç”¨å•çº¿ç¨‹å¼‚æ­¥æ¨¡å‹ï¼ŒåŸæ¥çš„ `threading.Thread` + `time.sleep()` æ–¹å¼æ— æ³•æ­£ç¡®æ›´æ–° UIã€‚

**é—®é¢˜ç°è±¡**ï¼šæ’­æ”¾å™¨è¿›åº¦æ¡ã€æ—¶é—´æ˜¾ç¤ºã€ç‰‡æ®µé«˜äº®åªåœ¨é¼ æ ‡ç§»åŠ¨æ—¶æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ `page.run_task()` + `asyncio.sleep()` æ›¿ä»£ `threading.Thread` + `time.sleep()`
- ä½¿ç”¨ `page.update()` æ›¿ä»£ `self.update()` ç¡®ä¿ UI åˆ·æ–°

### âœ… å·²ä¿®å¤ï¼šflet-audio å…¼å®¹æ€§

Flet 0.80+ ä¸­ `Audio` æ˜¯ Service ç±»å‹ï¼Œä¸éœ€è¦æ·»åŠ åˆ° `page.overlay`ï¼Œç›´æ¥åˆ›å»ºåè°ƒç”¨ `play()`/`pause()` å³å¯ã€‚

### GUI åŠŸèƒ½çŠ¶æ€

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| åŒ Tab åˆ‡æ¢ | âœ… å®Œæˆ |
| å†å²è®°å½•ä¸‹æ‹‰ | âœ… å®Œæˆ |
| éŸ³é¢‘æ’­æ”¾å™¨ | âœ… å®Œæˆ (flet-audio) |
| æ’­æ”¾è¿›åº¦å®æ—¶æ›´æ–° | âœ… å®Œæˆ |
| ç‰‡æ®µé«˜äº®è·Ÿéšæ’­æ”¾ | âœ… å®Œæˆ |
| ç¼–è¾‘è¯´è¯äºº/å†…å®¹ | âœ… å®Œæˆ |
| ä¼šè®®æ€»ç»“é¢æ¿ | âœ… å®Œæˆ |
| å¯¼å‡ºåŠŸèƒ½ | âœ… å®Œæˆ |
| ç»ˆç«¯æ—¥å¿—è¾“å‡º | âœ… å®Œæˆ |
| å®æ—¶å½•éŸ³ | ğŸ“… é¢„ç•™ |

### å·²çŸ¥é—®é¢˜

1. **Gdk cursor theme è­¦å‘Š** - ç³»ç»Ÿçº§åˆ«ï¼Œä¸å½±å“ä½¿ç”¨

---

## ğŸ’¡ å¼€å‘æ³¨æ„äº‹é¡¹

### 1. æ¨¡å‹æ‡’åŠ è½½

æ‰€æœ‰æ¨¡å‹éƒ½ä½¿ç”¨æ‡’åŠ è½½æ¨¡å¼ï¼Œé¿å…å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰æ¨¡å‹ï¼š

```python
class DiarizationService:
    def __init__(self):
        self._pipeline = None  # ä¸ç«‹å³åŠ è½½
    
    @property
    def pipeline(self):
        if self._pipeline is None:
            self._pipeline = self._load_pipeline()
        return self._pipeline
```

### 2. æœåŠ¡å•ä¾‹æ¨¡å¼

é€šè¿‡ `services/__init__.py` æä¾›å•ä¾‹ï¼š

```python
from .services import get_diarization_service, get_asr_service, get_naming_service
```

### 3. æ•°æ®æ¨¡å‹ (Pydantic)

æ‰€æœ‰æ•°æ®ç»“æ„éƒ½ç”¨ Pydantic å®šä¹‰ï¼Œæ”¯æŒåºåˆ—åŒ–ï¼š

```python
from .models import Segment, SpeakerInfo, DiarizationResult

# åºåˆ—åŒ–
result.model_dump_json()

# ååºåˆ—åŒ–
Segment.model_validate(data)
```

### 4. æ—¥å¿—

```python
from .logger import get_logger
logger = get_logger("services.naming")
logger.info("xxx")
logger.debug("xxx")
```

### 5. Flet 0.80+ å¼‚æ­¥æ¨¡å‹

Flet 0.80+ é‡‡ç”¨å•çº¿ç¨‹å¼‚æ­¥æ¨¡å‹ï¼Œåå°ä»»åŠ¡å¿…é¡»ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼š

```python
# âŒ é”™è¯¯ï¼šä½¿ç”¨ threading
def _start_update_thread(self):
    def update_loop():
        while self.is_playing:
            self._update_time_display()
            time.sleep(0.2)
    threading.Thread(target=update_loop).start()

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ page.run_task + asyncio
def _start_update_loop(self):
    if self.page:
        self.page.run_task(self._async_update_loop)

async def _async_update_loop(self):
    while self.is_playing:
        self._update_time_display()
        await asyncio.sleep(0.2)
```

### 6. æµ‹è¯•

```bash
pytest tests/ -v
```

---

## ğŸ¨ GUI è®¾è®¡ï¼ˆç›®æ ‡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤ ä¼šè®®çºªè¦ AI                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   [ğŸ™ï¸ å®æ—¶å½•éŸ³]   [ğŸ“ éŸ³é¢‘æ–‡ä»¶]  â† Tab åˆ‡æ¢                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  éŸ³é¢‘æ¥æº:  â—‹ é€‰æ‹©æ–°æ–‡ä»¶  â— å†å²è®°å½•                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ â–¼ å†å²è®°å½•ä¸‹æ‹‰                           â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚  â˜‘ æ™ºèƒ½å‘½å  â˜‘ é”™åˆ«å­—æ ¡æ­£  â˜‘ ä¼šè®®æ€»ç»“  â˜ éŸ³é¢‘å¢å¼º                  â”‚
â”‚  [ â–¶ å¼€å§‹å¤„ç† ]  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 40% è¯­éŸ³è½¬å†™ä¸­...                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ å¯¹è¯è®°å½•              [âœï¸] â”‚  ğŸ“‹ ä¼šè®®æ€»ç»“                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â–¶ [00:00] å°æŸ”         [ç¼–è¾‘] â”‚  ## ä¸»é¢˜                           â”‚
â”‚   æˆ‘ä¸€ç›´æƒ³é—®ä½ ä¸€ä¸ªé—®é¢˜         â”‚  å…³äºå–œæ¬¢ä¸çˆ±çš„è®¨è®º                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                    â”‚
â”‚   [00:05] å­¦ç”Ÿ01               â”‚  ## å‚ä¼šäººå‘˜                       â”‚
â”‚   ä»€ä¹ˆé—®é¢˜å•Šï¼Ÿ                 â”‚  - å°æŸ”                            â”‚
â”‚                                â”‚  - å­¦ç”Ÿ01                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                    â”‚
â”‚  [â–¶] â”â”â”â”â”â—â”â”â”â”â”â”â” 00:32/03:45 â”‚  ## è¦ç‚¹                           â”‚
â”‚       éŸ³é¢‘æ’­æ”¾å™¨               â”‚  1. ...                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [å¯¼å‡º TXT]  [å¯¼å‡º JSON]  [å¯¼å‡º Markdown]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’**:
- ç‚¹å‡»å¯¹è¯æ¡ç›® â†’ éŸ³é¢‘è·³è½¬åˆ°è¯¥æ—¶é—´ç‚¹æ’­æ”¾
- é¼ æ ‡æ‚¬åœ â†’ æ˜¾ç¤ºç¼–è¾‘æŒ‰é’®
- ç‚¹å‡»ç¼–è¾‘ â†’ å¼¹çª—ä¿®æ”¹è¯´è¯äºº/å†…å®¹
- åˆ‡æ¢å†å²è®°å½• â†’ è‡ªåŠ¨åŠ è½½ä¹‹å‰çš„å¤„ç†ç»“æœ

---

## ğŸ“ ä»£ç é£æ ¼

- Python 3.10+
- ç±»å‹æ³¨è§£
- Docstring (Google é£æ ¼)
- Ruff æ ¼å¼åŒ–
- è¡Œé•¿åº¦ 100

---

## ğŸ”— ç›¸å…³é“¾æ¥

- pyannote-audio: https://github.com/pyannote/pyannote-audio
- faster-whisper: https://github.com/SYSTRAN/faster-whisper
- llama-cpp-python: https://github.com/abetlen/llama-cpp-python
- Flet: https://flet.dev/
- Tauri: https://tauri.app/

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q: pyannote æ¨¡å‹ä¸‹è½½å¤±è´¥
A: éœ€è¦å…ˆåœ¨ HuggingFace ç½‘ç«™åŒæ„æ¨¡å‹ä½¿ç”¨åè®®ï¼Œç„¶åè®¾ç½® HF_TOKEN

### Q: CUDA out of memory
A: è®¾ç½® `MEETING_AI_ASR__DEVICE=cpu` æˆ–ä½¿ç”¨æ›´å°çš„æ¨¡å‹

### Q: LLM è¿è¡Œå¾ˆæ…¢
A: ä½¿ç”¨æ›´å°çš„é‡åŒ–ç‰ˆæœ¬ï¼ˆQ4_K_Mï¼‰ï¼Œæˆ–å‡å°‘ N_CTX

### Q: è¯†åˆ«çš„åå­—ä¸å‡†ç¡®
A: æ£€æŸ¥ naming.py ä¸­çš„æ­£åˆ™æ¨¡å¼ï¼Œæˆ–è°ƒæ•´ CONFIDENCE_THRESHOLD

---

*æœ€åæ›´æ–°: 2026-02-03 (GUI åŠŸèƒ½å®Œæˆï¼ŒUI å®æ—¶æ›´æ–°ä¿®å¤)*
