# Meeting AI 环境配置 (NVIDIA CUDA 12.1) - 推荐
#
# 如果你有 NVIDIA GPU，使用此文件获得最佳性能
# Whisper 转写和 pyannote 说话人分离会快 5-10 倍
#
# 使用方法:
#   mamba env create -f environment-cuda.yml
#   mamba activate meeting-ai
#
# 要求: NVIDIA GPU + CUDA 12.1 驱动
# 检查驱动: nvidia-smi

name: meeting-ai
channels:
  - conda-forge
  - pytorch
  - nvidia
  - defaults

dependencies:
  # Python
  - python=3.11

  # PyTorch (CUDA 12.1) - 明确指定从 pytorch channel 获取 CUDA 版本
  - pytorch::pytorch>=2.0
  - pytorch::torchaudio>=2.0
  - pytorch::pytorch-cuda=12.1

  # 系统依赖
  - ffmpeg

  # 编译工具
  - cmake
  - cxx-compiler

  # pip 安装的包
  - pip
  - pip:
      # 核心
      - numpy>=1.24.0
      - pydantic>=2.0.0
      - pydantic-settings>=2.0.0
      - rich>=13.0.0
      - typer>=0.9.0

      # 音频处理
      - soundfile>=0.12.0
      - librosa>=0.10.0

      # ASR
      - faster-whisper>=1.0.0

      # 说话人分离
      - pyannote-audio>=3.1.0

      # LLM (CUDA 加速)
      - llama-cpp-python>=0.2.0

      # GUI
      - flet>=0.80.0
      - flet-audio>=0.1.0

      # 实时流式
      - sounddevice>=0.4.6
      - webrtcvad>=2.0.10

      # 音频增强 (可选)
      - noisereduce>=3.0.0
